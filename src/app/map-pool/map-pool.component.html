<div class="card-body">
    <!-- <img class="tourneyImg" src="\{{ tournament.image | lowercase }}" alt="" /> -->
    <h1>{{tournament.name}}</h1>
    <h3>Map Pool</h3>
    <br>
    <div *ngIf="loading else loaded">
        <img src="/assets/svg/BeatKhana Logo RGB animated.svg" style="display: block;
                margin-left: auto;
                margin-right: auto;
                width: 70px; 
                border: none;
                padding: 15px; ">
    </div>
    <ng-template #loaded>
        <mat-tab-group animationDuration="300ms" dynamicHeight (selectedTabChange)="tabClick($event)">
            <mat-tab *ngFor="let pool of mapPools | keyvalue" id="{{pool.value.id}}">
                <ng-template mat-tab-label>
                    <span>{{pool.value.poolName}}</span>
                    <img src="{{pool.value.image}}" style="width: 24px;height: 24px;border: none;margin-left: 5px;">
                </ng-template>
                <table *ngIf="pool.value.songs.length > 0 else noSongs" mat-table [dataSource]="pool.value.songs" class="card-text">
                    <ng-container matColumnDef="image">
                        <th mat-header-cell *matHeaderCellDef style="width: 2%;"> &nbsp;&nbsp;&nbsp; Song </th>
                        <td mat-cell *matCellDef="let song" style="width: 2%;">
                            <img src="https://scoresaber.com/imports/images/songs/{{song.hash}}.png" alt="{{song.name}} Cover art" class="songImg">
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="songName">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let song">
                            <a href="{{song.ssLink}}" target="_blank">
                                {{song.name}} - {{song.songAuthor}} 
                            </a>
                            <span class="mapperName">[{{song.levelAuthor}}]</span>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="diff">
                        <th mat-header-cell *matHeaderCellDef> Difficulty </th>
                        <td mat-cell *matCellDef="let song">
                            {{song.diff}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="bsaver">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let song">
                            <a href="https://beatsaver.com/beatmap/{{song.key}}" target="_blank" class="beatsaver_icon"></a>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="oneClick">
                        <th mat-header-cell *matHeaderCellDef> </th>
                        <td mat-cell *matCellDef="let song">
                            <a href="beatsaver://{{song.key}}" target="_blank">One Click</a>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                    <tr mat-row *matRowDef="let myRowData; columns: columnsToDisplay"></tr>
                </table>
                <ng-template #noSongs>
                    <p class="card-text">
                        This pool currently has no songs in it.
                    </p>
                </ng-template>

            </mat-tab>
        </mat-tab-group>
        <p class="card-text">
            <button mat-stroked-button color="primary" (click)="downloadPool()" *ngIf="poolsLen > 0 && mapPools[curPoolId].songs.length > 0">Download Pool</button> &nbsp;
            <button *ngIf="isAuthorised && poolsLen > 0" mat-stroked-button color="primary" (click)="addSong()">Add Song</button> &nbsp;
            <button *ngIf="isAuthorised" mat-stroked-button color="primary" (click)="openCreate()">Create Map Pool</button> &nbsp;
            <button *ngIf="isAuthorised" mat-stroked-button color="primary" (click)="editPool()">Edit Map Pool</button>
        </p>
    </ng-template>
</div>